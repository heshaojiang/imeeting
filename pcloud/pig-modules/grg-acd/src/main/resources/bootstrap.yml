server:
  port: 4060

spring:
  application:
    name: grg-acd
  profiles:
    active: dev
  redis:
    #数据库索引
    database: 0
    host: imeeting-redis
    port: 6379
    password:
    pool:
      #最大连接数
      max-active: 8
      #最大阻塞等待时间(负数表示没限制)
      max-wait: -1
      #最大空闲
      max-idle: 8
      #最小空闲
      min-idle: 0
      #连接超时时间
    timeout: 10000
    #未使用redis管理session
  session:
    store-type: none
#  jackson:
#    date-format: yyyy-MM-dd HH:mm:ss
  http:
    multipart:
      max-file-size: 50MB
      max-request-size: 50MB
      enabled: true
  cloud:
    config:
      fail-fast: true
      discovery:
        service-id: pig-config-server
        enabled: true
      profile: dev
#mybaits-plus配置，修改主键类型，mapper.xml、type 别名等
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  typeAliasesPackage: com.grgbanking.grgacd.mapper
  global-config:
    #主键类型  0:"数据库ID自增", 1:"用户输入ID",2:"全局唯一ID (数字类型唯一ID)", 3:"全局唯一ID UUID";
    id-type: 0
    #字段策略 0:"忽略判断",1:"非 NULL 判断"),2:"非空判断"
    field-strategy: 1
    #驼峰下划线转换
    db-column-underline: true
    #刷新mapper 调试神器
    refresh-mapper: true
    #数据库大写下划线转换
    #capital-mode: true
    #逻辑删除配置
    logic-delete-value: 1
    logic-not-delete-value: 0
    sql-injector: com.baomidou.mybatisplus.mapper.LogicSqlInjector
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

feign:
  hystrix:
    enabled: true
  okhttp:
    enable: true
  httpclient:
    enable: false
  client:
    config:
      feignName:
        connectTimeout: 30000
        readTimeout: 30000
#---



#  rabbitmq:
#    host: imeeting-rabbitmq
#    port: 5672
#    username: admin
#    password: admin
#  zipkin:
#    rabbitmq:
#      queue: zipkin
#  sleuth:
#    sampler:
#      percentage: 1.0

#feign开启hystrix机制
#feign:
#  hystrix:
#    enabled: true

#打开management所有端点

eureka:
  instance:
    prefer-ip-address: true
    lease-renewal-interval-in-seconds: 3 #客户端每隔n秒向服务端发送数据包
    lease-expiration-duration-in-seconds: 7 # 客户端告知服务端：若在n秒内没有向服务器发送信息，则服务端将其从服务列表中删除
  client:
    registry-fetch-interval-seconds: 5 #定时的向Eureka确认，刷新自己的可用的服务列表，修改为5s，从服务失效到客户端发现最多7+5=12s
    serviceUrl:
      defaultZone: http://imeeting:imeeting123@imeeting-eureka:4010/eureka

logging:
  config: file:./config/logback/logback_acd.xml
  level:
    com.grgbanking.grgacd.mapper.*: debug
#logging:
#  level:
#    org.springframework.cloud.gateway: DEBUG
#    org.springframework.http.server.reactive: INFO
#    org.springframework.web.reactive: INFO
#    reactor.ipc.netty: INFO

acd:
  caller:
    timeout:
      #呼叫超时
      makecall: 120
      #等待坐席接听时间
      pending: 30
  chat:
    # 10*60*1000,单位为毫秒
    writecycle: 30000
  calls:
    # 检查通话记录状态间隔 30秒
    checkInterval: 30000


#配置不需要登录访问的接口，如有需要请配置
urls:
  anon:
    - /caller/**
    - /rpc
    - /common/**
    - /calls/getFile
    - /calls/saveChatRecord
    - /agent/login
    - /v2/api-docs
    - /swagger-resources/**
    - /swagger-ui.html
#上传文件保存的路径
config:
  fileSavePath: /opt/iMeeting/uploadfiles/
  fileTempPath: /opt/iMeeting/uploadfiles_temp/

swagger:
  show: false
---
spring:
  profiles: dev
eureka:
  metadata-map:
    zone: zone-1
  client:
    prefer-same-zone-eureka: true
    #地区
    region: guangzhou
    availability-zones:
      guangzhou: zone-1
    service-url:
      zone-1: http://imeeting:imeeting123@imeeting-eureka:4010/eureka

---
spring:
  profiles: moreService
eureka:
  metadata-map:
    zone: zone-1
  client:
    prefer-same-zone-eureka: true
    #地区
    region: guangzhou
    availability-zones:
      guangzhou: zone-1 #,zone-2
    service-url:
      zone-1: http://imeeting:imeeting123@imeeting-eureka:4010/eureka
      #zone-2: http://imeeting:imeeting123@localhost:5010/eureka
